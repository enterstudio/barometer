/*! barometer v1.2.0 */
!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";var a=window.barometer=e.exports={},r=n(2),o=n(6);n(7),n(3),n(8),a.url=null,a.gauge=r.gauge,a.count=r.count,a.onPageChanged=o.onPageChanged,a.oncePageLoaded=o.oncePageLoaded},function(e,t,n){"use strict";var a=e.exports={},r=n(3),o=n(1);a.url="XXXXX",a.e=function(){a.buffer={gauges:{},counters:{}},a.bufferSize=0},a.e(),a.count=function(e){a.buffer.counters[e]=a.buffer.counters[e]||0,a.buffer.counters[e]++,a.t(),a.bufferSize++,window.barometer.debug&&console.log("count",e)},a.gauge=function(e,t){a.buffer.gauges[e]=a.buffer.gauges[e]||[],a.buffer.gauges[e].push(t),a.t(),a.bufferSize++,window.barometer.debug&&console.log("gauge",e,t)};var i=null;a.t=function(){i&&a.bufferSize<100&&clearTimeout(i),i=setTimeout(a.n,5e3)},a.n=function(e){if(0!==a.bufferSize&&o.url){i&&(clearTimeout(i),i=null);var t=a.buffer;a.e();var n=o.url;if(navigator.sendBeacon)navigator.sendBeacon(n,JSON.stringify(t));else{var u=new r.a;u.open("POST",n,!0),u.timeout=4e3,u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(t))}}}},function(e,t,n){"use strict";var a=e.exports={},r=n(4),o=n(2),i=n(5);a.a=window.XMLHttpRequest;var u=["unsent","opened","headers_received","loading","done"];a.r=function(e){return"xhr."+e},a.o=function(e,t,n){var a={total:n};for(var r in e)"_"!==r[0]&&0!==e[r]&&(a[r]=e[r]-t);return a},a.i=function(e){var t,n,r=i(e.url),u=a.o(e.readyStateTimes,e.offset,e.total);for(var s in u)t="timing."+e.type+"."+r+"."+s,n=a.r(t),o.gauge(n,u[s]);t="responses."+e.type+"."+r+"."+e.request.status,n=a.r(t),o.count(n),t="size."+e.type+"."+r+"."+e.request.status,n=a.r(t),o.gauge(n,(e.request.responseText||"").length)},window.XMLHttpRequest=function(){var e=new a.a;try{var t={},n=e.open,o=e.send;e.open=function(o,i){try{var s=new Date;r(e,"readystatechange",function(){t[u[e.readyState]]=new Date}),r(e,"loadend",function(n){return a.i({type:(o||"unknown").toLowerCase(),url:i,readyStateTimes:t,offset:s,total:new Date-s,request:e})})}catch(c){}return n.apply(e,arguments)},e.send=function(){return o.apply(e,arguments)}}catch(i){}return e}},function(e,t){"use strict";e.exports=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}},function(e,t){"use strict";e.exports=function(e,t){var n=(e||"").split("?")[0];return n=n.replace(/^https?:\/\//i,""),"/"===n[0]?n=(window.location.host||"").replace(/[^a-z0-9-\/]/gi,"_")+"."+n.slice(1).replace(/[^a-z0-9-\/]/gi,"_"):(n=n.split("/"),n=n.shift().replace(/[^a-z0-9-\/]/gi,"_")+"."+n.join("/").replace(/[^a-z0-9-\/]/gi,"_")),(t||"").match(/\?/)&&(n+=t.split("?")[0].slice(1).replace(/[^a-z0-9-]/gi,"_")),n}},function(e,t,n){"use strict";var a,r,o,i=e.exports={},u=n(4),s=n(7),c=n(2),f=0,g=[];i.u=function(){c.gauge(r,new Date-a)},i.s=function(){c.count(s.r("visits")),a&&i.u(),f++;var e=new Date,t=f,n=0,u=[9,9,9,9,9],l=!1,p=25,d=s.r("dynamic"),v=function(){clearTimeout(w),o=!0,a=new Date,r=s.r("engagement");var t=125;c.gauge(d,new Date-e-t);for(var n=0;n<g.length;n++)g[n]()},w=setTimeout(function(){if(l=!0,1===f)for(var e=0;e<g.length;e++)g[e]()},6e3),h=function(){var e=new Date;setTimeout(function(){var a=new Date,r=a-e-p;if(r>n&&(n=r),!l){if(t!==f)return v();u.shift(),u.push(r);for(var o=0,i=0;i<5;i++)o+=u[i];return o<5&&n>25?v():void setTimeout(h,p)}},p)};h()},i.s(),window.history?(u(window,"popstate",i.s),function(e){if(e){var t=e.pushState;e.pushState=function(){return i.s(),t.apply(e,arguments)}}}(window.history)):u(window,"hashchange",i.s),i.onPageChanged=function(e){g.push(e)},i.oncePageLoaded=function(e){if(o)return e();var t=!1;i.onPageChanged(function(){t||(t=!0,e())})}},function(e,t,n){"use strict";var a=e.exports={},r=n(4),o=n(2),i=n(5);a.o=function(e){var t={},n=e.navigationStart;e.toJSON&&(e=e.toJSON());for(var a in e)"navigationStart"!==a&&0!==e[a]&&(t[a]=e[a]-n);return t},a.r=function(e){var t=i(window.location.href,window.location.hash);return"pageload."+t+"."+e.replace(/[^a-z0-9-]/gi,"_")},a.f=function(){var e,t=window.performance.timing||{},n=a.o(t);for(var r in n)e=a.r(r),o.gauge(e,n[r]);var i=(window.performance.navigation||{}).redirectCount||0;e=a.r("redirects"),o.gauge(e,i)},"object"==typeof window.performance&&("complete"===document.readyState?a.f():r(window,"load",a.f))},function(e,t,n){"use strict";var a,r=e.exports={},o=n(6),i=n(2),u=0,s=0;r.handleResource=function(e){var t=r.findRule(e);t&&r.track(e,t)},r.findRule=function(e){var t=window.barometer.resources;if(t){for(var n=e.name.replace(/https?:\/\//i,"").split("/"),a=n.shift(),r=n.join("/"),o=0;o<t.length;o++){var i=t[o];if((!i.domain||a.match(i.domain))&&(!i.path||r.match(i.path))&&(!i.type||e.entryType===i.type))return i.metrics}return null}},r.track=function(e,t){var n=e.name.replace(/https?:\/\//i,"").split("/"),a="resources."+e.entryType+".";a+=n.shift().replace(/[^a-z0-9_]/gi,"_"),a+=".",a+=n.join("/").split("?")[0].replace(/[^a-z0-9_]/gi,"_");for(var r in t){r=t[r];var o=e[r];0!==o&&("duration"!==r&&(o=s-o),i.gauge(a+"."+r,o))}},r.initialise=function(){window.performance&&window.performance.getEntries&&(a=new Date,o.onPageChanged(function(){s=new Date-a;for(var e=window.performance.getEntries();u<e.length;u++)r.handleResource(e[u])}))},r.initialise()}]);